<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" >
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">分配订单</h4>
      </div>
      <div class="modal-body text-center">
   			    <div class="form-group">
                <label>分配流向</label>
                <select class="form-control select2 text-center" style="width: 100%;" id="disTo">
                  <option selected="selected" value="自产" >自产</option>
                  <option value="委外" >委外</option>
                </select>
              </div>
             
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" onclick="selectDis()">分配</button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  var tmpa;
  function showModel(a){
	 		var model =  $("#myModal");
	 		 model.modal("show");
	 		model.data("id",$(a).data("id"));
	 		 tmpa = a;
	  }
  
function selectDis(){
	var model =  $("#myModal") ;
	var ide =  model.data("id");
	 $.ajax({
		   type: "POST",
		   url:"/fy/admin/biz/fyorder/distrubite",
		   data:{id:ide,disTo:$("#disTo").val()},
		   success: function(ret){
			   if (ret.state == "ok") {
				   model.modal('hide');
				   $(tmpa).parent().empty();
				}
			   alert(ret.msg);
		   },
		   error:function (XMLHttpRequest, textStatus, errorThrown) {
			    // 通常 textStatus 和 errorThrown 之中
			    // 只有一个会包含信息
			 //   this; // 调用本次AJAX请求时传递的options参数
			   alert('网络异常');
			}
		});
}
 
</script>
  