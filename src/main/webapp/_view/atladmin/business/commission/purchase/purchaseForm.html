
<input hidden="hidden" value="#(model.id??)" name="model.parentId"></input>
<input hidden="hidden" value="#(model.id??)" name="model.orderId"></input>
<div class="row">

	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">类别名称</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="类别名称" readonly="readonly"
					value="#(model.cate_tmp??)">
			</div>
		</div>
	</div>
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">计划员</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="类别名称"  readonly="readonly"
					value="#(model.plan_tmp??)" >
			</div>
		</div>
	</div>


</div>


<div class="row">

	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">执行状态</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="类别名称"  readonly="readonly"
					value="#(model.execu_status??)"">
			</div>
		</div>
	</div>
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">紧急状态</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="类别名称"  readonly="readonly"
					value="#(model.urgent_status??)" >
			</div>
		</div>
	</div>


</div>

<div class="row">

	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">订单日期</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="类别名称"  readonly="readonly"
					value="#(model.order_date??)">
			</div>
		</div>
	</div>
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">交货日期</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="交货日期"  readonly="readonly"
					value="#(model.delivery_date??)" >
			</div>
		</div>
	</div>


</div>

<div class="row">

	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">工作订单号</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="工作订单号"  readonly="readonly"
					value="#(model.work_order_no??)">
			</div>
		</div>
	</div>
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">送货单号</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="送货单号"  readonly="readonly"
					value="#(model.delivery_no??)" >
			</div>
		</div>
	</div>


</div>

<div class="row">

	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">商品名称</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="商品名称"  readonly="readonly"
					value="#(model.commodity_name??)">
			</div>
		</div>
	</div>
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">商品规格</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="商品规格"  readonly="readonly"
					value="#(model.commodity_spec??)" >
			</div>
		</div>
	</div>


</div>


<div class="row">

	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">总图号</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="总图号"  readonly="readonly"
					value="#(model.map_no??)" >
			</div>
		</div>
	</div>
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">技术条件</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="技术条件"  readonly="readonly"
					value="#(model.technology??)" >
			</div>
		</div>
	</div>


</div>

<div class="row">

	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">加工要求</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="加工要求"  readonly="readonly"
					value="#(model.machining_require??)" >
			</div>
		</div>
	</div>
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">数量</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="数量"  readonly="readonly"
					value="#(model.quantity??)">
			</div>
		</div>
	</div>


</div>


<div class="row">
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">单位</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="单位"  readonly="readonly"
					value="#(model.unit_tmp)" >
			</div>
		</div>
	</div>
	
	<div class="col-md-6">
		<div class="form-group">
			<label class="col-sm-3 control-label">采购日期</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="采购日期"   data-type='datepicker' value="#date(now,"yyyy-MM-dd")"
					 name="model.purchaseDate">
			</div>
		</div>
	</div>

</div>



<div class="row">
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">采购名称</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="采购名称" value="#(model.commodity_name??)" name="model.purchaseTitle" >
			</div>
		</div>
	</div>
	
	<div class="col-md-6">
		<div class="form-group">
			<label class="col-sm-3 control-label">采购数量</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" id="purchase_quantity" placeholder="采购数量"  value="#(model.quantity??)"
					 name="model.purchaseQuantity">
			</div>
		</div>
	</div>

</div>


<div class="row">
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">单件</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="单件" id="single" name="model.purchaseSingleWeight" autocomplete="off"  onblur="excutweigth()"
					 >
			</div>
		</div>
	</div>
	
	<div class="col-md-6">
		<div class="form-group">
			<label class="col-sm-3 control-label">总重</label>

			<div class="col-sm-9">
				<input type="text" id="purchaseWeight" class="form-control" placeholder="总重"  name="model.purchaseWeight" autocomplete="off" 
					>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
<!--

//-->
function excutweigth(){
	var single  = 	$("#single").val();
	var quantity  = 	$("#purchase_quantity").val();
	if(single!=null&&quantity != null)
	$("#purchaseWeight").val(parseFloat(single)*parseFloat(quantity));
}

function execuCost(){
	var single  = 	$("#cost").val();
	var quantity  = 	$("#purchase_quantity").val();
	if(single!=null&&quantity != null)
	$("#totalCost").val(parseFloat(single)*parseFloat(quantity));
	
	
}

</script>


<div class="row">
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">单价</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="单价" id="cost" name="model.purchaseCost" autocomplete="off" onblur="execuCost()"
					 >
			</div>
		</div>
	</div>
	
	<div class="col-md-6">
		<div class="form-group">
			<label class="col-sm-3 control-label">总金额</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="总金额" id="totalCost"  name="model.purchaseAccount" autocomplete="off" 
					>
			</div>
		</div>
	</div>

</div>


<div class="row">
	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">折扣</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="单价"  name="model.discount"
					value="" >
			</div>
		</div>
	</div>
	
	<div class="col-md-6">
		<div class="form-group">
			<label class="col-sm-3 control-label">折后金额</label>

			<div class="col-sm-9">
				<input type="text" class="form-control" placeholder="总金额"   name="model.discountAccount"
					value="" >
			</div>
		</div>
	</div>

</div>


<div class="row">


	<div class="col-md-6">

		<div class="form-group">
			<label class="col-sm-3 control-label">供应商</label>

			<div class="col-sm-9">
					
				<input type="text" placeholder="选择供应商"  id="supplier" class="form-control"
					 onclick="showChooesSupplier()">
					
				<input type="text"  placeholder="" hidden="hidden" id="supplierId"  name="model.supplierId" >
			</div>
		</div>
	</div>


</div>
<script type="text/javascript">
<!--

//-->




	function showChooesSupplier(){
		
		$('#myModel').modal("show");
		getSupplierFromServer(1);	
	  	}

	function onselectSupplier(){
		
		
	  	
		 var a = $("input[name='selectSupplier']:checked").val();
		 console.debug(a);
		 if(a!=null){
			 var idName = 	a.split("_");
	  		 $("#supplierId").val(idName[0]);
	  		$("#supplier").val(idName[1]);
	  	}else{
			alert("没有选择人员");
			return;
	    }
	    
	
		$('#myModel').modal("hide");
	  	}


	function getSupplierFromServer(pageNumer){
		
		$.get("/fy/admin/base/supplier/searchSupplierJson", { keyWord: $("#pmodelKeyWord").val(), p : pageNumer},
			  function(data){
				plist = 	data.list;
				var	ptbody = $("#ptbody");
				ptbody.empty();
			for(x in plist){
					console.debug(plist[x].name);
					
					var tr='<tr><td class="text-center"><input type="radio" name="selectSupplier" value="'+plist[x].id+'_'+plist[x].name+'"></td>'+
					'<td>'+plist[x].name+'</td>'+
					'<td>'+plist[x].address+'</td>'+
					'<td>'+plist[x].phone+'</td></tr>';
					ptbody.append(tr);
				}

			
			var pageUl =$("#pageUl");
			pageUl.empty();
			if(data.totalPage < 2 ){
				return;
			}
			else{
				
				if(data.firstPage){
					var li = '<li class="disabled"  ><a href="#" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a></li>'
						pageUl.append(li);
				}else{
					var li = '<li onclick="getSupplierFromServer('+ (data.pageNumber -1 )+')"><a href="#" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a></li>'
						pageUl.append(li);
				}

				if(data.totalPage>5){
						for(var i = 1;i<6;i++){
							if(data.pageNumber==i){
									var li = '<li class="active"><a href="#">'+i+'</a></li>'
									pageUl.append(li);
								}
								else{
									var li = '<li onclick="getSupplierFromServer('+ i +')"><a href="#">'+i+'</a></li>'
									pageUl.append(li);
								}
						}	
				}else{
					for(var i = 1;i<(data.totalPage+1);i++){
						if(data.pageNumber==i){
								var li = '<li class="active"><a href="#">'+i+'</a></li>'
								pageUl.append(li);
							}
							else{
								var li = '<li onclick="getSupplierFromServer('+ i +')"><a href="#">'+i+'</a></li>'
								pageUl.append(li);
							}
					}	

				}
				if(data.lastPage){
					var  li = '<li class="disabled" ><a href="#" aria-label="Next"> <span aria-hidden="true">&raquo;</span></a></li>'
						pageUl.append(li);
				}else{
					var  li = '<li onclick="getSupplierFromServer('+ (data.pageNumber -1 )+')" ><a href="#" aria-label="Next"> <span aria-hidden="true">&raquo;</span></a></li>'
					pageUl.append(li);
				}

				
				}
			  },'json');
	  	}
</script>
#include("../searchSupplier.html")



	